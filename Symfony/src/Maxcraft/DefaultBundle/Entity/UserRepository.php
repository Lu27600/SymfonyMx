<?php

namespace Maxcraft\DefaultBundle\Entity;
use Doctrine\ORM\EntityRepository;

/**
 * UserRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class UserRepository extends EntityRepository
{

    public function findWebZones($user){
        $webZones = array();
        $servZones = $this->getEntityManager()->getRepository('MaxcraftDefaultBundle:Zone')->findBy(
            array('owner' => $user),
            null,
            null,
            0
        );
        foreach($servZones as $z){
            $wz = $this->getEntityManager()->createQuery('SELECT w FROM MaxcraftDefaultBundle:WebZone w WHERE w.servZone = '.$z->getId())->getOneOrNullResult();
            $webZones[] = $wz;
        }

        return $webZones;
    }


}
